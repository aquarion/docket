/**
 * Application configuration and constants
 */
var DocketConfig = {
  // Global application state
  allEvents: {},

  // Application constants
  constants: {
    VERSION: (new URLSearchParams(window.location.search)).get("version"),
    DEBUG: {% if git_branch is not empty %} true {% else %} false {% endif %},
    LATITUDE: "{{ latitude }}",
    LONGITUDE: "{{ longitude }}",
    SECONDS_PER_REFRESH: 300, // in seconds. 300 == 5 minutes
    
    // Filter configuration
    FILTER_OUT_LIST: ["Focus time", "Take a break", "Catch up on messages"],
    FILTER_OUT_REGEXES: ["^\/"],
    
    // Calendar format configuration
    UNTIL_CALENDAR_FORMAT: {
      sameDay: '[Today]',
      nextDay: '[Tomorrow]',
      nextWeek: 'dddd',
      lastDay: '[Yesterday]',
      lastWeek: '[Last] dddd',
      sameElse: 'DD/MM/YYYY'
    },
    
    // iCal calendars configuration
    ICAL_CALENDARS: {
{% for name, cal in ical_calendars %}
      "{{ name }}": {
        "color": "{{ cal.color }}",
        "name": "{{ cal.name }}",
        "src": "{{ cal.src }}",
        "emoji": "{{ cal.emoji }}",
        "proxy_url": "./icalproxy.php?cal={{ name }}&version=" + ((new URLSearchParams(window.location.search)).get("version") || "")
      },
{% endfor %}
    }
  }
};
{# 
// Backward compatibility - expose constants globally
var allEvents = DocketConfig.allEvents;
var filter_out_list = DocketConfig.constants.FILTER_OUT_LIST;
var filter_out_regexes = DocketConfig.constants.FILTER_OUT_REGEXES;
var VERSION = DocketConfig.constants.VERSION;
var DEBUG = DocketConfig.constants.DEBUG;
var UNTIL_CALENDAR_FORMAT = DocketConfig.constants.UNTIL_CALENDAR_FORMAT;
var ICAL_CALENDARS = DocketConfig.constants.ICAL_CALENDARS;
var LATITUDE = DocketConfig.constants.LATITUDE;
var LONGITUDE = DocketConfig.constants.LONGITUDE;
var SECONDS_PER_REFRESH = DocketConfig.constants.SECONDS_PER_REFRESH; #}